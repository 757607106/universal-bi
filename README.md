# Universal BI - AI é©±åŠ¨çš„è‡ªç„¶è¯­è¨€æ•°æ®åˆ†æå¹³å°

<div align="center">

**é€šè¿‡è‡ªç„¶è¯­è¨€ä¸æ•°æ®åº“å¯¹è¯ï¼Œè®©æ•°æ®åˆ†æå˜å¾—ç®€å•**

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.100+-green.svg)](https://fastapi.tiangolo.com/)
[![Vue.js](https://img.shields.io/badge/Vue.js-3.0+-brightgreen.svg)](https://vuejs.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

</div>

## ğŸ“– é¡¹ç›®ç®€ä»‹

Universal BI æ˜¯ä¸€ä¸ªåŸºäº AI çš„æ™ºèƒ½æ•°æ®åˆ†æå¹³å°ï¼Œç”¨æˆ·åªéœ€ç”¨è‡ªç„¶è¯­è¨€æé—®ï¼Œç³»ç»Ÿå°±èƒ½è‡ªåŠ¨ç”Ÿæˆ SQL æŸ¥è¯¢ã€æ‰§è¡Œå¹¶è¿”å›å¯è§†åŒ–ç»“æœã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **AI SQL ç”Ÿæˆ**ï¼šä½¿ç”¨ Vanna AI + Qwen-Max æ¨¡å‹ï¼Œè‡ªåŠ¨å°†è‡ªç„¶è¯­è¨€è½¬æ¢ä¸º SQL
- ğŸ“Š **æ™ºèƒ½å¯è§†åŒ–**ï¼šæ ¹æ®æŸ¥è¯¢ç»“æœè‡ªåŠ¨æ¨èæœ€ä½³å›¾è¡¨ç±»å‹ï¼ˆæŸ±çŠ¶å›¾ã€æŠ˜çº¿å›¾ã€è¡¨æ ¼ç­‰ï¼‰
- ğŸ”Œ **å¤šæ•°æ®æºæ”¯æŒ**ï¼šæ”¯æŒ MySQLã€PostgreSQL ç­‰ä¸»æµæ•°æ®åº“
- ğŸ“¦ **Dataset ç®¡ç†**ï¼šå¯è§†åŒ–æ„å»ºå’Œè®­ç»ƒæ•°æ®é›†ï¼Œæå‡ AI å‡†ç¡®ç‡
- ğŸ“ˆ **ä»ªè¡¨ç›˜åŠŸèƒ½**ï¼šä¿å­˜æŸ¥è¯¢ç»“æœä¸ºå¡ç‰‡ï¼Œæ„å»ºä¸ªæ€§åŒ–æ•°æ®é©¾é©¶èˆ±
- ğŸ¨ **ç°ä»£åŒ– UI**ï¼šåŸºäº Element Plus + Tailwind CSS çš„ç¾è§‚ç•Œé¢
- ğŸŒ™ **ä¸»é¢˜åˆ‡æ¢**ï¼šæ”¯æŒäº®è‰²/æš—è‰²ä¸»é¢˜

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ

- **Web æ¡†æ¶**ï¼šFastAPIï¼ˆPython 3.8+ï¼‰
- **AI å¼•æ“**ï¼šVanna AIï¼ˆLegacy API + Qwen-Maxï¼‰
- **å‘é‡æ•°æ®åº“**ï¼šPostgreSQL + pgvector
- **ORM**ï¼šSQLAlchemy
- **æ•°æ®åº“æ”¯æŒ**ï¼šPostgreSQLï¼ˆä¸»æ•°æ®åº“ + å‘é‡å­˜å‚¨ï¼‰
- **ç¼“å­˜**ï¼šRedis
- **åˆ†æå¼•æ“**ï¼šDuckDBï¼ˆç”¨äºå¤šè¡¨åˆ†æï¼‰

### å‰ç«¯æŠ€æœ¯æ ˆ

- **æ¡†æ¶**ï¼šVue 3 + TypeScript
- **æ„å»ºå·¥å…·**ï¼šVite
- **UI ç»„ä»¶åº“**ï¼šElement Plus
- **CSS æ¡†æ¶**ï¼šTailwind CSS
- **å›¾è¡¨åº“**ï¼šECharts
- **è·¯ç”±**ï¼šVue Router

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Node.js 16+
- PostgreSQL 12+ (with pgvector extension)
- Redis 5.0+ï¼ˆç”¨äºç¼“å­˜ï¼‰
- Docker & Docker Composeï¼ˆå¯é€‰ï¼Œæ¨èï¼‰

### æ–¹å¼ä¸€ï¼šä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

ä½¿ç”¨è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼Œæ”¯æŒå¼€å‘æ¨¡å¼å’Œ Docker æ¨¡å¼ï¼š

#### å¼€å‘æ¨¡å¼ï¼ˆæœ¬åœ°è¿è¡Œï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/757607106/universal-bi.git
cd universal-bi

# 2. æ‰§è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
bash setup.sh dev

# 3. ç¼–è¾‘ .env é…ç½®æ–‡ä»¶ï¼ˆé‡è¦ï¼ï¼‰
vi .env
# å¿…é¡»é…ç½® DASHSCOPE_API_KEY

# 4. å¯åŠ¨æœåŠ¡
bash start_dev.sh
```

#### Docker æ¨¡å¼ï¼ˆå®¹å™¨åŒ–éƒ¨ç½²ï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/757607106/universal-bi.git
cd universal-bi

# 2. æ‰§è¡Œ Docker éƒ¨ç½²
bash setup.sh docker

# 3. ç¼–è¾‘ .env é…ç½®æ–‡ä»¶ï¼ˆé‡è¦ï¼ï¼‰
vi .env
# å¿…é¡»é…ç½® DASHSCOPE_API_KEY

# 4. å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

#### åç«¯å¯åŠ¨

1. **å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/757607106/universal-bi.git
cd universal-bi
```

2. **é…ç½®ç¯å¢ƒå˜é‡**

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè‡³å°‘é…ç½®ä»¥ä¸‹é¡¹ï¼š
# - DASHSCOPE_API_KEYï¼ˆå¿…å¡«ï¼‰
# - SQLALCHEMY_DATABASE_URIï¼ˆæ•°æ®åº“è¿æ¥ï¼‰
# - REDIS_URLï¼ˆRedis è¿æ¥ï¼‰
vi .env
```

3. **å®‰è£… Python ä¾èµ–**

```bash
cd backend
pip install -r requirements.txt
```

4. **åˆå§‹åŒ–æ•°æ®åº“**

```bash
# åˆ›å»ºæ•°æ®åº“è¡¨å¹¶æ’å…¥åˆå§‹æ•°æ®
python init_db.py
```

5. **å¯åŠ¨åç«¯æœåŠ¡**

```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

åç«¯æœåŠ¡å°†è¿è¡Œåœ¨ `http://localhost:8000`

#### å‰ç«¯å¯åŠ¨

1. **å®‰è£…ä¾èµ–**

```bash
cd frontend
npm install
```

2. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
npm run dev
```

å‰ç«¯æœåŠ¡å°†è¿è¡Œåœ¨ `http://localhost:3000`

### è®¿é—®åœ°å€

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ä»¥ä¸‹åœ°å€ï¼š

- ğŸŒ **å‰ç«¯é¡µé¢**ï¼šhttp://localhost:3000
- ğŸ”§ **åç«¯ API**ï¼šhttp://localhost:8000
- ğŸ“š **API æ–‡æ¡£**ï¼šhttp://localhost:8000/docs
- ğŸ‘¤ **é»˜è®¤ç®¡ç†å‘˜**ï¼šç”¨æˆ·å `admin`ï¼Œå¯†ç  `admin123`ï¼ˆè¯·ç™»å½•åç«‹å³ä¿®æ”¹ï¼‰

### ç¯å¢ƒé…ç½®è¯´æ˜

#### å¿…å¡«é…ç½®

```env
# é€šä¹‰åƒé—® API Keyï¼ˆå¿…å¡«ï¼‰
# è·å–åœ°å€ï¼šhttps://dashscope.console.aliyun.com/apiKey
DASHSCOPE_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxx
```

#### æ•°æ®åº“é…ç½®ï¼ˆå¯é€‰ï¼‰

```env
# PostgreSQLï¼ˆç»Ÿä¸€ä¸»æ•°æ®åº“ï¼ŒåŒæ—¶æ”¯æŒå‘é‡å­˜å‚¨ï¼‰
SQLALCHEMY_DATABASE_URI=postgresql://postgres:password@localhost:5432/universal_bi
PG_HOST=localhost
PG_PORT=5432
PG_DB=universal_bi
PG_USER=postgres
PG_PASSWORD=password
VECTOR_STORE_TYPE=pgvector
```

#### Redis é…ç½®ï¼ˆå¯é€‰ï¼‰

```env
# Redis ç¼“å­˜æœåŠ¡
REDIS_URL=redis://localhost:6379/0
# å¦‚æœè®¾ç½®äº†å¯†ç ï¼š
REDIS_URL=redis://:password@localhost:6379/0
```

## ğŸ“š ä½¿ç”¨æŒ‡å—

### 1. æ·»åŠ æ•°æ®æº

è®¿é—®ã€Œæ•°æ®è¿æ¥ä¸­å¿ƒã€ï¼Œç‚¹å‡»ã€Œæ·»åŠ è¿æ¥ã€ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼š

- æ•°æ®æºåç§°
- æ•°æ®åº“ç±»å‹ï¼ˆMySQL/PostgreSQLï¼‰
- ä¸»æœºåœ°å€ã€ç«¯å£
- æ•°æ®åº“åã€ç”¨æˆ·åã€å¯†ç 

### 2. åˆ›å»º Dataset

åœ¨ã€ŒDataset ç®¡ç†ã€é¡µé¢ï¼š

1. ç‚¹å‡»ã€Œæ–°å»º Datasetã€
2. é€‰æ‹©æ•°æ®æº
3. é€‰æ‹©éœ€è¦è®­ç»ƒçš„è¡¨ï¼ˆæ”¯æŒå¤šé€‰ï¼‰
4. ç‚¹å‡»ã€Œå¼€å§‹è®­ç»ƒã€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æå– DDL å¹¶è®­ç»ƒ AI æ¨¡å‹

### 3. å¼€å§‹å¯¹è¯æŸ¥è¯¢

åœ¨ã€ŒChat BIã€é¡µé¢ï¼š

1. é€‰æ‹©å·²è®­ç»ƒçš„ Dataset
2. ç”¨è‡ªç„¶è¯­è¨€æé—®ï¼Œä¾‹å¦‚ï¼š
   - "æŸ¥è¯¢ä¸Šä¸ªæœˆçš„é”€å”®é¢"
   - "ç»Ÿè®¡æ¯ä¸ªäº§å“çš„é”€é‡"
   - "æŒ‰æœˆç»Ÿè®¡è®¢å•æ•°"
3. ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ SQL å¹¶æ‰§è¡Œ
4. ç»“æœä»¥è¡¨æ ¼æˆ–å›¾è¡¨å½¢å¼å±•ç¤º

### 4. ä¿å­˜åˆ°ä»ªè¡¨ç›˜

- ç‚¹å‡»æŸ¥è¯¢ç»“æœå³ä¾§çš„ã€Œä¿å­˜åˆ°çœ‹æ¿ã€æŒ‰é’®
- é€‰æ‹©æˆ–åˆ›å»ºä»ªè¡¨ç›˜
- æŸ¥è¯¢å¡ç‰‡ä¼šä¿å­˜åˆ°ä»ªè¡¨ç›˜ï¼Œæ”¯æŒä¸€é”®åˆ·æ–°æ•°æ®

## ğŸ”§ QA è®­ç»ƒä¼˜åŒ–

ä¸ºäº†æé«˜ AI ç”Ÿæˆ SQL çš„å‡†ç¡®ç‡ï¼Œå¯ä»¥ä½¿ç”¨ QA å¯¹ï¼ˆQuestion-SQL Pairï¼‰è¿›è¡Œè®­ç»ƒï¼š

```bash
cd backend
python scripts/train_qa_fix.py
```

ç¼–è¾‘ `train_qa_fix.py` ä¸­çš„ `qa_pairs` åˆ—è¡¨ï¼Œæ·»åŠ å¸¸è§é—®é¢˜å’Œå¯¹åº”çš„æ ‡å‡† SQLã€‚

## ğŸ³ Docker å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# é‡å¯æœåŠ¡
docker-compose restart

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f backend

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build

# è¿›å…¥å®¹å™¨æ‰§è¡Œå‘½ä»¤
docker exec -it universal-bi-backend bash

# æ¸…ç†æ‰€æœ‰æ•°æ®ï¼ˆè°¨æ…ï¼ï¼‰
docker-compose down -v
```

## ğŸ æ•…éšœæ’æŸ¥

### 1. åç«¯å¯åŠ¨å¤±è´¥

**é—®é¢˜**ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥æ•°æ®åº“æœåŠ¡æ˜¯å¦å¯åŠ¨
docker-compose ps mysql
# æˆ–
mysql -h localhost -u root -p

# æ£€æŸ¥ .env ä¸­çš„æ•°æ®åº“è¿æ¥é…ç½®
cat .env | grep SQLALCHEMY_DATABASE_URI
```

**é—®é¢˜**ï¼šDASHSCOPE_API_KEY æœªé…ç½®

```bash
# ç¡®è®¤ API Key å·²é…ç½®
cat .env | grep DASHSCOPE_API_KEY

# è·å– API Keyï¼šhttps://dashscope.console.aliyun.com/apiKey
```

### 2. Docker å®¹å™¨å¯åŠ¨å¤±è´¥

```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
docker-compose logs backend
docker-compose logs mysql

# é‡å¯æœåŠ¡
docker-compose restart

# å®Œå…¨é‡æ–°éƒ¨ç½²
docker-compose down
docker-compose up -d --build
```

### 3. Redis è¿æ¥é—®é¢˜

```bash
# æ£€æŸ¥ Redis æœåŠ¡
redis-cli ping
# æˆ– Docker ç¯å¢ƒï¼š
docker-compose exec redis redis-cli ping

# æ£€æŸ¥ Redis è¿æ¥é…ç½®
cat .env | grep REDIS_URL
```

### 4. å‰ç«¯è®¿é—® 404

**é—®é¢˜**ï¼šå‰ç«¯é¡µé¢åˆ·æ–°å 404

è§£å†³ï¼šç¡®è®¤ Vue Router é…ç½®ä¸º `history` æ¨¡å¼ï¼Œä¸”åç«¯æ”¯æŒ SPA è·¯ç”±

### 5. æ€§èƒ½é—®é¢˜

```bash
# æ£€æŸ¥ç³»ç»Ÿèµ„æº
docker stats

# æ¸…ç† Docker ç¼“å­˜
docker system prune -a

# æ¸…ç† ChromaDB å‘é‡æ•°æ®ï¼ˆè°¨æ…ï¼ï¼‰
rm -rf backend/chroma_db
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v0.2.0 (2026-01)

- âœ… æ–°å¢ä¸€é”®éƒ¨ç½²è„šæœ¬
- âœ… æ”¯æŒ Docker Compose éƒ¨ç½²
- âœ… æ·»åŠ  Redis ç¼“å­˜æ”¯æŒ
- âœ… å®Œå–„ç¯å¢ƒé…ç½®ç®¡ç†
- âœ… æ•°æ®åº“è‡ªåŠ¨åˆå§‹åŒ–

### v0.1.0 (2025-12)

- âœ… åŸºæœ¬åŠŸèƒ½å®ç°
- âœ… Chat BI è‡ªç„¶è¯­è¨€æŸ¥è¯¢
- âœ… Dataset ç®¡ç†å’Œè®­ç»ƒ
- âœ… Dashboard çœ‹æ¿åŠŸèƒ½

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
universal-bi/
â”œâ”€â”€ backend/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/v1/         # API ç«¯ç‚¹
â”‚   â”‚   â”‚   â””â”€â”€ endpoints/
â”‚   â”‚   â”‚       â”œâ”€â”€ chat.py          # Chat BI æ¥å£
â”‚   â”‚   â”‚       â”œâ”€â”€ dataset.py       # Dataset ç®¡ç†
â”‚   â”‚   â”‚       â”œâ”€â”€ datasource.py    # æ•°æ®æºç®¡ç†
â”‚   â”‚   â”‚       â””â”€â”€ dashboard.py     # ä»ªè¡¨ç›˜ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py            # ç³»ç»Ÿé…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ security.py
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”‚   â””â”€â”€ metadata.py          # æ•°æ®æºã€Datasetã€Dashboard æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/        # Pydantic Schema
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”‚   â”œâ”€â”€ vanna_manager.py     # Vanna AI æ ¸å¿ƒæœåŠ¡
â”‚   â”‚   â”‚   â””â”€â”€ db_inspector.py      # æ•°æ®åº“å…ƒæ•°æ®æ£€æŸ¥
â”‚   â”‚   â””â”€â”€ main.py         # FastAPI åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ scripts/            # å·¥å…·è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ train_qa_fix.py          # QA è®­ç»ƒè„šæœ¬
â”‚   â”‚   â””â”€â”€ generate_fake_data.py    # ç”Ÿæˆæµ‹è¯•æ•°æ®
â”‚   â””â”€â”€ requirements.txt    # Python ä¾èµ–
â”œâ”€â”€ frontend/               # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/           # API è°ƒç”¨å°è£…
â”‚   â”‚   â”œâ”€â”€ components/    # Vue ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatBI.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ DatasetBuilder.vue
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.vue
â”‚   â”‚   â”‚   â””â”€â”€ Charts/
â”‚   â”‚   â”œâ”€â”€ views/         # é¡µé¢è§†å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ Chat/      # Chat BI é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ Dataset/   # Dataset ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ router/        # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â””â”€â”€ package.json       # NPM ä¾èµ–
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â”œâ”€â”€ 1_prd.md           # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ 2_tech_stack.md    # æŠ€æœ¯é€‰å‹æ–‡æ¡£
â”‚   â””â”€â”€ 3_project_structure.md
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### Chat BI - è‡ªç„¶è¯­è¨€æŸ¥è¯¢

- è¾“å…¥é—®é¢˜ â†’ AI ç”Ÿæˆ SQL â†’ æ‰§è¡Œ â†’ å¯è§†åŒ–
- æ”¯æŒå†å²å¯¹è¯è®°å½•
- ä¸€é”®ä¿å­˜æŸ¥è¯¢åˆ°ä»ªè¡¨ç›˜

### Dataset Builder - æ•°æ®é›†ç®¡ç†

- å¯è§†åŒ–é€‰æ‹©è¡¨è¿›è¡Œè®­ç»ƒ
- å®æ—¶è®­ç»ƒè¿›åº¦å±•ç¤º
- æ”¯æŒæ•°æ®é¢„è§ˆå’Œ SQL æŸ¥çœ‹

### Dashboard - æ•°æ®é©¾é©¶èˆ±

- ç½‘æ ¼å¸ƒå±€å±•ç¤ºå¤šä¸ªæŸ¥è¯¢å¡ç‰‡
- æ”¯æŒåˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ä»ªè¡¨ç›˜
- å¡ç‰‡æ”¯æŒåˆ·æ–°ã€åˆ é™¤æ“ä½œ

## ğŸ”‘ å…³é”®æŠ€æœ¯äº®ç‚¹

### 1. Vanna AI Legacy API é›†æˆ

ä½¿ç”¨ Vanna Legacy API æ›¿ä»£ Vanna 2.0 Agent Memoryï¼Œç¡®ä¿ QA è®­ç»ƒæ•°æ®èƒ½å¤Ÿè¢«æ­£ç¡®æ£€ç´¢å’Œä½¿ç”¨ï¼š

```python
class VannaLegacy(ChromaDB_VectorStore, OpenAI_Chat):
    def __init__(self, config=None):
        ChromaDB_VectorStore.__init__(self, config=config)
        self.client = OpenAIClient(
            api_key=config.get('api_key'),
            base_url='https://dashscope.aliyuncs.com/compatible-mode/v1'
        )
```

### 2. Qwen-Max æ¨¡å‹

ç»è¿‡æµ‹è¯•ï¼Œ`qwen-max` ç›¸æ¯” `qwen-turbo` åœ¨ä¸¥æ ¼éµå®ˆ prompt æ–¹é¢è¡¨ç°æ›´å¥½ï¼Œèƒ½å¤Ÿç¨³å®šè¿”å›çº¯ SQL è€Œéå¼•å¯¼æ€§å›ç­”ã€‚

### 3. SQLAlchemy Eager Loading

ä½¿ç”¨ `selectinload` é¢„åŠ è½½å…³è”å¯¹è±¡ï¼Œé¿å… N+1 æŸ¥è¯¢å’Œ lazy loading é—®é¢˜ï¼š

```python
stmt = select(Dataset).options(selectinload(Dataset.datasource))
```

## ğŸ› å·²çŸ¥é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### è¡¨åå‰ç¼€é—®é¢˜

**é—®é¢˜**ï¼šAI å¯èƒ½å¿½ç•¥è¡¨åå‰ç¼€ï¼ˆå¦‚ `dim_`ã€`fact_`ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœ¨ system prompt ä¸­æ˜ç¡®å¼ºè°ƒä½¿ç”¨å®Œæ•´è¡¨å
2. é€šè¿‡ QA è®­ç»ƒæä¾›æ ‡å‡†ç¤ºä¾‹
3. ä½¿ç”¨ `qwen-max` æ¨¡å‹æé«˜å‡†ç¡®ç‡

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ å¼€æºåè®®

MIT License

## ğŸ‘¥ ä½œè€…

[@757607106](https://github.com/757607106)

## ğŸ™ è‡´è°¢

- [Vanna AI](https://vanna.ai/) - AI SQL ç”Ÿæˆå¼•æ“
- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ– Python Web æ¡†æ¶
- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶
- [Element Plus](https://element-plus.org/) - Vue 3 ç»„ä»¶åº“
- [é€šä¹‰åƒé—®](https://tongyi.aliyun.com/) - å¤§è¯­è¨€æ¨¡å‹æ”¯æŒ

---

<div align="center">
â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª Starï¼
</div>
