# å¿«é€Ÿå…¥é—¨

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**  
- [QUICKSTART.md](file://QUICKSTART.md)
- [setup.sh](file://setup.sh)
- [setup.bat](file://setup.bat)
- [docker-compose.yml](file://docker-compose.yml)
- [.env.example](file://.env.example)
- [README.md](file://README.md)
- [backend/init_db.py](file://backend/init_db.py)
- [backend/app/main.py](file://backend/app/main.py)
- [backend/app/core/config.py](file://backend/app/core/config.py)
- [backend/requirements.txt](file://backend/requirements.txt)
- [frontend/package.json](file://frontend/package.json)
- [Dockerfile.backend](file://Dockerfile.backend)
- [Dockerfile.frontend](file://Dockerfile.frontend)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [éƒ¨ç½²æ–¹å¼é€‰æ‹©](#éƒ¨ç½²æ–¹å¼é€‰æ‹©)
3. [Docker Compose éƒ¨ç½²ï¼ˆæ¨èï¼‰](#docker-compose-éƒ¨ç½²æ¨è)
4. [å¼€å‘æ¨¡å¼éƒ¨ç½²](#å¼€å‘æ¨¡å¼éƒ¨ç½²)
5. [éªŒè¯éƒ¨ç½²](#éªŒè¯éƒ¨ç½²)
6. [é¦–æ¬¡ä½¿ç”¨æµç¨‹](#é¦–æ¬¡ä½¿ç”¨æµç¨‹)
7. [å¸¸è§é—®é¢˜æ’æŸ¥](#å¸¸è§é—®é¢˜æ’æŸ¥)
8. [é…ç½®é¡¹è¯¦è§£](#é…ç½®é¡¹è¯¦è§£)

## ç®€ä»‹

Universal BI æ˜¯ä¸€ä¸ªåŸºäº AI çš„è‡ªç„¶è¯­è¨€æ•°æ®åˆ†æå¹³å°ï¼Œå…è®¸ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€æé—®æ¥æŸ¥è¯¢æ•°æ®åº“å¹¶ç”Ÿæˆå¯è§†åŒ–ç»“æœã€‚æœ¬æŒ‡å—å°†æŒ‡å¯¼æ‚¨å¦‚ä½•åœ¨æœ¬åœ°å¿«é€Ÿéƒ¨ç½²å¹¶è¿è¡Œè¯¥ç³»ç»Ÿï¼Œæ— è®ºæ‚¨æ˜¯é›¶åŸºç¡€ç”¨æˆ·è¿˜æ˜¯æœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œéƒ½èƒ½æ‰¾åˆ°é€‚åˆè‡ªå·±çš„éƒ¨ç½²æ–¹å¼ã€‚

**Section sources**
- [README.md](file://README.md#L1-L507)
- [QUICKSTART.md](file://QUICKSTART.md#L1-L274)

## éƒ¨ç½²æ–¹å¼é€‰æ‹©

ç³»ç»Ÿæä¾›ä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©æœ€é€‚åˆçš„ä¸€ç§ã€‚

### æ¨èï¼šDocker Composeï¼ˆæœ€ç®€å•ï¼‰

é€‚åˆï¼š
- âœ… ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- âœ… å¿«é€Ÿä½“éªŒå’Œæµ‹è¯•
- âœ… ä¸æƒ³æ‰‹åŠ¨é…ç½®ä¾èµ–

### å¼€å‘æ¨¡å¼ï¼ˆæ‰‹åŠ¨å®‰è£…ï¼‰

é€‚åˆï¼š
- âœ… æœ¬åœ°å¼€å‘å’Œè°ƒè¯•
- âœ… éœ€è¦ä¿®æ”¹æºä»£ç 
- âœ… ä¸æƒ³ä½¿ç”¨ Docker

**Section sources**
- [QUICKSTART.md](file://QUICKSTART.md#L5-L20)

## Docker Compose éƒ¨ç½²ï¼ˆæ¨èï¼‰

ä½¿ç”¨ Docker Compose å¯ä»¥ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ŒåŒ…æ‹¬åç«¯ APIã€å‰ç«¯ç•Œé¢ã€MySQLã€PostgreSQL å’Œ Redisã€‚

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œ

ç¡®ä¿å·²å®‰è£… Docker å’Œ Docker Composeï¼š

```bash
# æ£€æŸ¥ Docker ç‰ˆæœ¬
docker --version

# æ£€æŸ¥ Docker Compose ç‰ˆæœ¬
docker-compose --version
```

å¦‚æœªå®‰è£…ï¼Œè¯·å‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š
- macOS: https://docs.docker.com/desktop/install/mac-install/
- Linux: https://docs.docker.com/engine/install/

### ç¬¬äºŒæ­¥ï¼šå…‹éš†é¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®ä»“åº“
git clone https://github.com/757607106/universal-bi.git
cd universal-bi
```

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶
vi .env  # æˆ–ä½¿ç”¨ä»»æ„æ–‡æœ¬ç¼–è¾‘å™¨
```

**å¿…é¡»é…ç½®ä»¥ä¸‹å†…å®¹ï¼š**

```env
# é€šä¹‰åƒé—® API Keyï¼ˆå¿…å¡«ï¼‰
# è·å–åœ°å€ï¼šhttps://dashscope.console.aliyun.com/apiKey
DASHSCOPE_API_KEY=sk-your-actual-api-key-here

# æ•°æ®åº“å¯†ç ï¼ˆå»ºè®®ä¿®æ”¹ï¼‰
MYSQL_ROOT_PASSWORD=your_secure_password
POSTGRES_PASSWORD=your_secure_password
```

### ç¬¬å››æ­¥ï¼šå¯åŠ¨æœåŠ¡

```bash
# ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
docker-compose logs -f
```

ç­‰å¾… 1-2 åˆ†é’Ÿï¼Œæ‰€æœ‰æœåŠ¡å¯åŠ¨å®Œæˆã€‚

### ç¬¬äº”æ­¥ï¼šè®¿é—®ç³»ç»Ÿ

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š

- ğŸŒ **å‰ç«¯é¡µé¢**ï¼šhttp://localhost:3000
- ğŸ“š **API æ–‡æ¡£**ï¼šhttp://localhost:8000/docs
- ğŸ‘¤ **é»˜è®¤è´¦æˆ·**ï¼šç”¨æˆ·å `admin`ï¼Œå¯†ç  `admin123`

**Section sources**
- [QUICKSTART.md](file://QUICKSTART.md#L23-L85)
- [docker-compose.yml](file://docker-compose.yml#L1-L141)
- [.env.example](file://.env.example#L1-L72)

## å¼€å‘æ¨¡å¼éƒ¨ç½²

é€‚ç”¨äºéœ€è¦æœ¬åœ°å¼€å‘æˆ–è°ƒè¯•çš„åœºæ™¯ã€‚

### ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡ç¯å¢ƒ

```bash
# ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š
python3 --version  # Python 3.8+
node --version     # Node.js 16+
mysql --version    # MySQL 5.7+ æˆ– PostgreSQL 12+
redis-cli --version  # Redis 5.0+
```

### ç¬¬äºŒæ­¥ï¼šå¿«é€Ÿéƒ¨ç½²

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/757607106/universal-bi.git
cd universal-bi

# æ‰§è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆLinux/macOSï¼‰
bash setup.sh dev

# æˆ– Windows ç³»ç»Ÿ
setup.bat dev
```

è„šæœ¬å°†è‡ªåŠ¨ï¼š
1. âœ… å®‰è£…åç«¯ Python ä¾èµ–
2. âœ… å®‰è£…å‰ç«¯ Node.js ä¾èµ–
3. âœ… åˆ›å»º .env é…ç½®æ–‡ä»¶
4. âœ… ç”Ÿæˆå¯åŠ¨è„šæœ¬

### ç¬¬ä¸‰æ­¥ï¼šé…ç½® API Key

```bash
# ç¼–è¾‘ .env æ–‡ä»¶
vi .env

# è®¾ç½®é€šä¹‰åƒé—® API Key
DASHSCOPE_API_KEY=sk-your-actual-api-key-here
```

### ç¬¬å››æ­¥ï¼šåˆå§‹åŒ–æ•°æ®åº“

```bash
cd backend
python init_db.py
```

è¯¥è„šæœ¬ä¼šåˆ›å»ºæ‰€æœ‰æ•°æ®åº“è¡¨å¹¶æ’å…¥é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ã€‚

### ç¬¬äº”æ­¥ï¼šå¯åŠ¨æœåŠ¡

```bash
# ä½¿ç”¨ç”Ÿæˆçš„å¯åŠ¨è„šæœ¬
bash start_dev.sh

# æˆ–è€…æ‰‹åŠ¨åˆ†åˆ«å¯åŠ¨ï¼š
# åç«¯ï¼šcd backend && uvicorn app.main:app --reload
# å‰ç«¯ï¼šcd frontend && npm run dev
```

**Section sources**
- [QUICKSTART.md](file://QUICKSTART.md#L88-L143)
- [setup.sh](file://setup.sh#L1-L318)
- [setup.bat](file://setup.bat#L1-L213)
- [backend/init_db.py](file://backend/init_db.py#L1-L79)

## éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€

**Docker æ¨¡å¼ï¼š**
```bash
docker-compose ps
```

**å¼€å‘æ¨¡å¼ï¼š**
```bash
# æ£€æŸ¥åç«¯å¥åº·çŠ¶æ€
curl http://localhost:8000/api/v1/health

# æ£€æŸ¥å‰ç«¯æ˜¯å¦å¯è®¿é—®
curl http://localhost:3000
```

### 2. ç™»å½•ç³»ç»Ÿ

- è®¿é—®ï¼šhttp://localhost:3000
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`admin123`

**âš ï¸ é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹å¯†ç ï¼**

### 3. æµ‹è¯•åŠŸèƒ½

1. **æ·»åŠ æ•°æ®æº**
   - è¿›å…¥ã€Œæ•°æ®è¿æ¥ä¸­å¿ƒã€
   - ç‚¹å‡»ã€Œæ·»åŠ è¿æ¥ã€
   - é…ç½®ä½ çš„æ•°æ®åº“è¿æ¥

2. **åˆ›å»º Dataset**
   - è¿›å…¥ã€ŒDataset ç®¡ç†ã€
   - åˆ›å»ºæ–° Dataset
   - é€‰æ‹©è¡¨å¹¶è®­ç»ƒ

3. **å¼€å§‹å¯¹è¯**
   - è¿›å…¥ã€ŒChat BIã€
   - é€‰æ‹© Dataset
   - ç”¨è‡ªç„¶è¯­è¨€æé—®

**Section sources**
- [QUICKSTART.md](file://QUICKSTART.md#L147-L189)
- [README.md](file://README.md#L163-L171)

## é¦–æ¬¡ä½¿ç”¨æµç¨‹

### 1. æ·»åŠ æµ‹è¯•æ•°æ®æº

1. ç™»å½•ç³»ç»Ÿåï¼Œç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„ã€Œæ•°æ®è¿æ¥ä¸­å¿ƒã€
2. ç‚¹å‡»ã€Œæ·»åŠ è¿æ¥ã€æŒ‰é’®
3. å¡«å†™æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼š
   - åç§°ï¼šæµ‹è¯•æ•°æ®åº“
   - ç±»å‹ï¼šMySQL
   - ä¸»æœºï¼šlocalhost
   - ç«¯å£ï¼š3306
   - æ•°æ®åº“åï¼šuniversal_bi
   - ç”¨æˆ·åï¼šroot
   - å¯†ç ï¼šåœ¨ `.env` ä¸­è®¾ç½®çš„ `MYSQL_ROOT_PASSWORD`

4. ç‚¹å‡»ã€Œæµ‹è¯•è¿æ¥ã€ç¡®è®¤è¿é€šæ€§ï¼Œç„¶åä¿å­˜ã€‚

### 2. åˆ›å»º Dataset å¹¶è®­ç»ƒ

1. è¿›å…¥ã€ŒDataset ç®¡ç†ã€é¡µé¢
2. ç‚¹å‡»ã€Œæ–°å»º Datasetã€
3. è¾“å…¥åç§°ï¼ˆå¦‚â€œé”€å”®æ•°æ®â€ï¼‰
4. é€‰æ‹©åˆšæ·»åŠ çš„æ•°æ®æº
5. é€‰æ‹©éœ€è¦åˆ†æçš„è¡¨ï¼ˆå¯å¤šé€‰ï¼‰
6. ç‚¹å‡»ã€Œå¼€å§‹è®­ç»ƒã€ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æå–è¡¨ç»“æ„å¹¶è®­ç»ƒ AI æ¨¡å‹

### 3. æ‰§è¡Œè‡ªç„¶è¯­è¨€æŸ¥è¯¢

1. è¿›å…¥ã€ŒChat BIã€é¡µé¢
2. åœ¨ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹©å·²è®­ç»ƒçš„ Dataset
3. è¾“å…¥è‡ªç„¶è¯­è¨€é—®é¢˜ï¼Œä¾‹å¦‚ï¼š
   - â€œæŸ¥è¯¢ä¸Šä¸ªæœˆçš„é”€å”®é¢â€
   - â€œç»Ÿè®¡æ¯ä¸ªäº§å“çš„é”€é‡â€
   - â€œæŒ‰æœˆç»Ÿè®¡è®¢å•æ•°â€

4. ç³»ç»Ÿå°†è‡ªåŠ¨ç”Ÿæˆ SQL å¹¶è¿”å›å¯è§†åŒ–ç»“æœã€‚

**Section sources**
- [README.md](file://README.md#L206-L234)
- [backend/app/main.py](file://backend/app/main.py#L1-L35)

## å¸¸è§é—®é¢˜æ’æŸ¥

### Q1: åç«¯å¯åŠ¨å¤±è´¥ï¼Œæç¤ºæ•°æ®åº“è¿æ¥é”™è¯¯

**è§£å†³æ–¹æ³•ï¼š**

```bash
# Docker æ¨¡å¼ï¼šæ£€æŸ¥ MySQL å®¹å™¨çŠ¶æ€
docker-compose ps mysql
docker-compose logs mysql

# å¼€å‘æ¨¡å¼ï¼šæ£€æŸ¥æœ¬åœ° MySQL æœåŠ¡
mysql -h localhost -u root -p

# æ£€æŸ¥ .env é…ç½®
cat .env | grep SQLALCHEMY_DATABASE_URI
```

### Q2: DASHSCOPE_API_KEY é”™è¯¯

**è§£å†³æ–¹æ³•ï¼š**
1. è®¿é—® https://dashscope.console.aliyun.com/apiKey è·å– API Key
2. ç¡®ä¿ `.env` æ–‡ä»¶ä¸­æ­£ç¡®é…ç½®ï¼š
   ```env
   DASHSCOPE_API_KEY=sk-xxxxxxxxxxxxxxxx
   ```
3. é‡å¯æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ

### Q3: Redis è¿æ¥å¤±è´¥

**è§£å†³æ–¹æ³•ï¼š**

```bash
# Docker æ¨¡å¼
docker-compose ps redis
docker-compose restart redis

# å¼€å‘æ¨¡å¼
redis-cli ping
# å¦‚æœå¤±è´¥ï¼Œå¯åŠ¨ Redis æœåŠ¡
redis-server
```

### Q4: å‰ç«¯é¡µé¢ç©ºç™½æˆ– 404

**è§£å†³æ–¹æ³•ï¼š**

```bash
# æ£€æŸ¥åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œ
curl http://localhost:8000/api/v1/health

# æ¸…ç†ç¼“å­˜é‡æ–°æ„å»ºå‰ç«¯
cd frontend
rm -rf node_modules dist
npm install
npm run dev
```

**Section sources**
- [QUICKSTART.md](file://QUICKSTART.md#L192-L250)
- [README.md](file://README.md#L285-L356)

## é…ç½®é¡¹è¯¦è§£

### æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š`.env`

ç³»ç»Ÿé€šè¿‡ `.env` æ–‡ä»¶ç®¡ç†æ‰€æœ‰é…ç½®é¡¹ã€‚ä»¥ä¸‹æ˜¯å…³é”®é…ç½®è¯´æ˜ï¼š

#### AI å¤§æ¨¡å‹é…ç½®
```env
# é€šä¹‰åƒé—® API Keyï¼ˆå¿…å¡«ï¼‰
DASHSCOPE_API_KEY=your_api_key_here
# æ¨¡å‹é€‰æ‹©ï¼šqwen-maxï¼ˆæ¨èï¼‰ã€qwen-plusã€qwen-turbo
QWEN_MODEL=qwen-max
```

#### æ•°æ®åº“è¿æ¥é…ç½®
```env
# MySQL é…ç½®
MYSQL_ROOT_PASSWORD=your_password
MYSQL_DATABASE=universal_bi
MYSQL_PORT=3306

# PostgreSQL é…ç½®ï¼ˆå‘é‡æ•°æ®åº“ï¼‰
POSTGRES_PASSWORD=your_password
POSTGRES_DB=universal_bi_vector
POSTGRES_PORT=5432
```

#### åº”ç”¨ç«¯å£é…ç½®
```env
# åç«¯ API ç«¯å£
BACKEND_PORT=8000
# å‰ç«¯ Web ç«¯å£
FRONTEND_PORT=3000
```

### å¦‚ä½•éªŒè¯æœåŠ¡æ­£å¸¸è¿è¡Œ

1. **è®¿é—® API æ–‡æ¡£**ï¼šhttp://localhost:8000/docs
2. **è°ƒç”¨å¥åº·æ£€æŸ¥æ¥å£**ï¼š
   ```bash
   curl http://localhost:8000/api/v1/health
   # é¢„æœŸè¿”å›ï¼š{"status":"ok"}
   ```
3. **æ£€æŸ¥å®¹å™¨çŠ¶æ€**ï¼ˆDocker æ¨¡å¼ï¼‰ï¼š
   ```bash
   docker-compose ps
   # æ‰€æœ‰æœåŠ¡çŠ¶æ€åº”ä¸º "Up"
   ```

**Section sources**
- [.env.example](file://.env.example#L1-L72)
- [backend/app/core/config.py](file://backend/app/core/config.py#L1-L51)
- [README.md](file://README.md#L173-L203)